@JWT_A =eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhQHRlc3QuY29tIiwianRpIjoiNTczMGU4YTEtYzAwMS00NWYzLWFiMjMtNGY5NTM3ZDdjYjRiIiwiaWF0IjoxNzcxMzQ0NDQzLCJleHAiOjE3NzEzODA0NDN9.hFAjDFAHDrFXEWmOrVSzTpY97TitG8dKfgaoi30QqGo
@JWT_B = eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhQHRlc3QuY29tIiwianRpIjoiZTdhOTdhMDUtNmEzNy00MDM1LWI5ZjUtODdjYzgyNDMyZDdhIiwiaWF0IjoxNzcwODM2MDA3LCJleHAiOjE3NzA4NzIwMDd9.ZjYqTljFmCTCtbkUDO3ydTLEDpWZrIqHBzI0Mn82bEQ
@FOLDER_ID = 1
@NOTE_ID = 1
@SHARE_TOKEN = 306c2bf9-8c87-42b0-8a90-1e716fa13b58

### Register User A
POST http://localhost:8081/auth/register
Content-Type: application/json

{
  "email": "a@test.com",
  "password": "password"
}

###

### Login User A → copy token to {{JWT_A}}
POST http://localhost:8081/auth/login
Content-Type: application/json

{
  "email": "a@test.com",
  "password": "password"
}
###
### LOGOUT
POST http://localhost:8081/auth/logout
Content-Type: application/json
Authorization: Bearer {{JWT_A}}


###
------------------------------------------------------------------
### Create Folder (User A) → copy returned id to {{FOLDER_ID}}
POST http://localhost:8081/folders
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

Personal

###

### Restore folder
POST http://localhost:8081/folders/{{FOLDER_ID}}/restore
Authorization: Bearer {{JWT_A}}
###

### Delete folder
DELETE http://localhost:8081/folders/{{FOLDER_ID}}
Authorization: Bearer {{JWT_A}}


###
-------------------------------------------------------

### Create Note inside Folder (User A) → copy returned id to {{NOTE_ID}}
POST http://localhost:8081/notes?folderId={{FOLDER_ID}}
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

note from user A

###

### Me (User A)
GET http://localhost:8081/me
Authorization: Bearer {{JWT_A}}

###

### Update Note (User A)
PATCH http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

updated content

###

### Register User B
POST http://localhost:8081/auth/register
Content-Type: application/json

{
  "email": "b@test.com",
  "password": "password"
}

###

### Login User B → copy token to {{JWT_B}}
POST http://localhost:8081/auth/login
Content-Type: application/json

{
  "email": "b@test.com",
  "password": "password"
}

###


### Ownership test: User B tries to GET User A’s note → expect 403 Forbidden
GET http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_B}}

###

### normal access
GET http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_A}}

###

### test soft delete
DELETE http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_A}}

###


### Ownership test: User B tries to PATCH → expect 403 Forbidden
PATCH http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_B}}
Content-Type: text/plain

hacked content

###

###
POST http://localhost:8081/notes/1/share
Authorization: Bearer {{JWT_A}}
Content-Type: application/json

{
"expiresInSeconds": 100
}
###

###
GET http://localhost:8081/notes/shared
Authorization: Bearer {{JWT_A}}

###

### (New) Share Note (User A) → returns token, copy to {{SHARE_TOKEN}}
POST http://localhost:8081/notes/2/restore
Authorization: Bearer {{JWT_A}}

###

###
POST http://localhost:8081/notes/{{NOTE_ID}}/tags
Authorization: Bearer {{JWT_A}}
Content-Type: application/json

["school"]

###

### (New) Shared access without auth → expect 200 + NoteResponse
GET http://localhost:8081/shared/{{SHARE_TOKEN}}

###

### (Optional) Invalid shared token → expect 404 NotFound
GET http://localhost:8081/shared/bad-token-xyz

### Pagination test (User A) → expect PageResponse JSON
GET http://localhost:8081/notes/search?page=0&size=2
Authorization: Bearer {{JWT_A}}