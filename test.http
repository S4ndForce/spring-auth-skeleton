@JWT_A = eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhQHRlc3QuY29tIiwiaWF0IjoxNzY5NjA5NDIyLCJleHAiOjE3Njk2MTMwMjJ9.NPoBR07maasofgusRp-mSpLNeEow68JPxB989IB9NeA
@JWT_B = eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJiQHRlc3QuY29tIiwiaWF0IjoxNzY5NjA5NDk0LCJleHAiOjE3Njk2MTMwOTR9.0Rudblu0xg0BxQ2LIjNEFFUwiPQskkqoBXycOrR-FK4
@FOLDER_ID = 1
@NOTE_ID = 1
@SHARE_TOKEN = e5435159-2cf7-4337-b6a3-54c625e5c52e

### Register User A
POST http://localhost:8081/auth/register
Content-Type: application/json

{
  "email": "a@test.com",
  "password": "password"
}

###

### Login User A → copy token to {{JWT_A}}
POST http://localhost:8081/auth/login
Content-Type: application/json

{
  "email": "a@test.com",
  "password": "password"
}

###

### Create Folder (User A) → copy returned id to {{FOLDER_ID}}
POST http://localhost:8081/folders
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

Personal

###

### Create Note inside Folder (User A) → copy returned id to {{NOTE_ID}}
POST http://localhost:8081/notes?folderId={{FOLDER_ID}}
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

note from user A

###

### Me (User A)
GET http://localhost:8081/me
Authorization: Bearer {{JWT_A}}

###

### Update Note (User A)
PATCH http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

updated content

###

### Register User B
POST http://localhost:8081/auth/register
Content-Type: application/json

{
  "email": "b@test.com",
  "password": "password"
}

###

### Login User B → copy token to {{JWT_B}}
POST http://localhost:8081/auth/login
Content-Type: application/json

{
  "email": "b@test.com",
  "password": "password"
}

###


### Ownership test: User B tries to GET User A’s note → expect 403 Forbidden
GET http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_B}}

###

### Ownership test: User B tries to GET User A’s note → expect 403 Forbidden
GET http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_A}}

###

### test soft delete
DELETE http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_A}}

###


### Ownership test: User B tries to PATCH → expect 403 Forbidden
PATCH http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_B}}
Content-Type: text/plain

hacked content

###

### (New) Share Note (User A) → returns token, copy to {{SHARE_TOKEN}}
POST http://localhost:8081/notes/{{NOTE_ID}}/share
Authorization: Bearer {{JWT_A}}

###

### (New) Share Note (User A) → returns token, copy to {{SHARE_TOKEN}}
POST http://localhost:8081/notes/{{NOTE_ID}}/restore
Authorization: Bearer {{JWT_A}}

###

###
POST http://localhost:8081/notes/{{NOTE_ID}}/tags
Authorization: Bearer {{JWT_A}}
Content-Type: application/json

["school"]

###

### (New) Shared access without auth → expect 200 + NoteResponse
GET http://localhost:8081/shared/{{SHARE_TOKEN}}

###

### (Optional) Invalid shared token → expect 404 NotFound
GET http://localhost:8081/shared/bad-token-xyz

### Pagination test (User A) → expect PageResponse JSON
GET http://localhost:8081/notes/search?page=0&size=2
Authorization: Bearer {{JWT_A}}