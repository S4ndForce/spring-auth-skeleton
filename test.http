@JWT_A = eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhQHRlc3QuY29tIiwiaWF0IjoxNzY4NTE0MjI1LCJleHAiOjE3Njg1MTc4MjV9.iyKKM2qkrl95qgOR0mKhuFhalPaxCGH5a9u3vAujPpU

@JWT_B = eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJiQHRlc3QuY29tIiwiaWF0IjoxNzY4MjIyNDgyLCJleHAiOjE3NjgyMjYwODJ9.SC-7sb65KgG6pek05_tyavrlWXGC_RoCzvB_6yGSxEo
@FOLDER_ID = 1
@NOTE_ID = 1
@SHARE_TOKEN = 289f500d-38ff-4b63-9871-3797e6eaabd8

### Register User A
POST http://localhost:8081/auth/register
Content-Type: application/json

{
  "email": "a@test.com",
  "password": "password"
}

###

### Login User A → copy token to {{JWT_A}}
POST http://localhost:8081/auth/login
Content-Type: application/json

{
  "email": "a@test.com",
  "password": "password"
}

###

### Create Folder (User A) → copy returned id to {{FOLDER_ID}}
POST http://localhost:8081/folders
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

Personal

###

### Create Note inside Folder (User A) → copy returned id to {{NOTE_ID}}
POST http://localhost:8081/notes?folderId={{FOLDER_ID}}
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

note from user A

###

### Me (User A)
GET http://localhost:8081/me
Authorization: Bearer {{JWT_A}}

###

### Update Note (User A)
PATCH http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_A}}
Content-Type: text/plain

updated content

###

### Register User B
POST http://localhost:8081/auth/register
Content-Type: application/json

{
  "email": "b@test.com",
  "password": "password"
}

###

### Login User B → copy token to {{JWT_B}}
POST http://localhost:8081/auth/login
Content-Type: application/json

{
  "email": "b@test.com",
  "password": "password"
}

###

### Ownership test: User B tries to GET User A’s note → expect 403 Forbidden
GET http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_B}}

###

### Ownership test: User B tries to PATCH → expect 403 Forbidden
PATCH http://localhost:8081/notes/{{NOTE_ID}}
Authorization: Bearer {{JWT_B}}
Content-Type: text/plain

hacked content

###

### (New) Share Note (User A) → returns token, copy to {{SHARE_TOKEN}}
POST http://localhost:8081/notes/{{NOTE_ID}}/share
Authorization: Bearer {{JWT_A}}

###

### (New) Shared access without auth → expect 200 + NoteResponse
GET http://localhost:8081/shared/{{SHARE_TOKEN}}

###

### (Optional) Invalid shared token → expect 404 NotFound
GET http://localhost:8081/shared/bad-token-xyz

### Pagination test (User A) → expect PageResponse JSON
GET http://localhost:8081/notes/search?page=0&size=2
Authorization: Bearer {{JWT_A}}